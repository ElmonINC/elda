{% extends "xel/layout.html" %}
{% block content %}
<h2>Search for Name</h2>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Search</button>
</form>

{% if searched %}
    <h3>Results for {{ first_name }} {{ last_name }}</h3>
    {% if narration_results %}
        <h3> Narration Matches</h3>
        <ol>
            {% for narration in narration_results %}
            <li> {{ narration.narration }}</li>
            {% endfor %}
        </ol>
    {% endif %}
    
    {% if entries %}
        <div style="max-height: 300px; overflow-y: auto;">
            <ul>
                {% for entry in entries %}
                    <li>
                        <strong>File:</strong> {{ entry.excel_file.file.name }}<br>
                        <strong>Name:</strong> {{ entry.first_name }} {{ entry.last_name }}<br>
                        <strong>Status:</strong> {{ entry.status }}
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <p>Name not found in any list.</p>
    {% endif %}
{% endif %}
{% endblock %}